
# SANDBOX - Test server w/ real lightning (capped)

@baseurl = https://api-sandbox.poweredbyibex.io
@email = mail2michaelennis@gmail.com
@password = <>
@accessToken = eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDcxNjAzMzEsImp0aSI6IjczZTZhZDY2LTU5NDUtNDVmOC1iMTgxLTEyYWRjNTQ3NzAzZiIsImlhdCI6MTcwNzE1NjczMSwiaXNzIjoiSUJFWF9IVUIiLCJzdWIiOiI2OWQ2NTAyYy01YTlkLTQ4M2MtOTRhMi1jMzQ5MWVlMGJhZjEiLCJ0cGUiOiJhY2Nlc3MiLCJwcm0iOnsiYWNjIjoxNSwiY3VyIjoxNSwibG5hIjoxNSwibG5wIjoxNSwibG5yIjoxNSwibG5zIjoxNSwibG53IjoxNSwibWV0IjoxNSwib25yIjoxNSwib25zIjoxNSwidHhzIjoxNSwidXNyIjoxNX19.eb2QqLJ3_xaTdilAZGfimpMi3m_bIqM7Vh7Yoxpq9A_PEP_a1WFyFwgGFMnufgLQ99l9o0hPRL-u2ymrtzHOKH5JXFmqaExx2Tk7k1k4G0d9_L_6g3cpPFRxQMAraAq20HKDDQUBdFZchSgV1PunvymJp1_rvm3zok4nYVPLxBXFNRhhZ1jBT-nCfXpJSgiZE4XVpaqARd2Ceep7RrYZr-ErSQAWhUZZhZa4KgbUqmYpHTsQgKkVnOWnY5MEUWzp4D-qMzaU8IPU_CWyu6v58OASXEY3lf3dvK4KcmKmRaPdSRVcTTrRg2uzbIptfXsHLqML5iF_sAHt9yj6MIvFmK4-jdL7CrXH8Wnpu6lV_CrGlY6ogMZZWhfPV7rdWQqf4_inL0RfEdR_hrxxdeN2R1-JmtKG45q2rW_2o2A8ksqGMEDZef2Tcc2oOhcJ_hwaDuWqtK5iDbSOOkgMr3E28x8j3T8KTaqL5_XwyAn5MqozewaIAFQobRMLuSka-6dsCl0DRpAwT_5l83d7uHG9_m5xY3bd9rMklYQW4-yFJHm_0isoZ6GYIxy1i3BWhl4McsmBvzEA-oyS0xTitm0D56kVDtcj7fgwHaD5AXTX1cf6e3U7aH6tUQD33JKmToMbPhV9oYXVHuj6-HMfqM4eUK-TqRpzqFIR2xuqOg8KnjI
@refreshToken = <>
# @walletId = 37d1ba6a-016d-48c2-b13f-4a251abe4bee
@walletId = c593736e-5a58-42e4-93fa-dc895856c1f1

### Sign in
POST {{baseurl}}/auth/signin HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "email": "{{email}}",
    "password": "{{password}}"
}

### Forgot password
POST {{baseurl}}/auth/forgot-password HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "email": "{{email}}"
}

### Change password
POST {{baseurl}}/auth/change-password HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{accessToken}}

{
    "proposedPassword": "",
    "previousPassword": ""
}

### Refresh Access Token
POST {{baseurl}}/auth/refresh-access-token HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "refreshToken": "{{refreshToken}}"
}

### Revoke Refresh Token and all associated access token
POST {{baseurl}}/auth/revoke-refresh-token HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "refreshToken": "{{refreshToken}}"
}

### getAccountDetails
GET {{baseurl}}/v2/account/37d1ba6a-016d-48c2-b13f-4a251abe4bee HTTP/1.1
Accept: application/json
Authorization: {{accessToken}}

### getAccountTransactions 
GET {{baseurl}}/v2/transaction/account/{{walletId}}/all HTTP/1.1
Accept: application/json
Authorization: {{accessToken}}

### getTransactionDetails
@transactionId = 4b791d2c-0f61-4192-9bab-4d6ffdee918f
GET {{baseurl}}/v2/transaction/{{transactionId}} HTTP/1.1
Accept: application/json
Authorization: {{accessToken}}

### getPayment (bolt11)
@bolt11 = lnbc120n1pjeserjpp5k8th9ls3f05ydgvle8tm2rzjjxecf6n34hk6e37pchkfpjmuc80qdp29qezjgr5v4ehggrjv43k26tkv5sxvmrpwd5zqer9wccqzzsxqyz5vqsp52e03c924y4w00z39d3h7xyvjykll78zlwqqgcgarthud0mmjpsgq9qyyssqwfcdp7jy67w8gnhnk68q7726yzapmku7nw79s826g7s95x2v8g9hw0k8wwghz5qwd6ulvyxfxaj85873lee69egmeeyvjr36dmq59acpq94028
GET {{baseurl}}/payment/from-bolt11/{{bolt11}} HTTP/1.1
Accept: application/json
Authorization: {{accessToken}}

### getPayment from payment hash
@hash = 7af4cf16e597a74ee6543ac50590aff1be9889ab7a36cc4b052f588addfaf220 
GET {{baseurl}}/invoice/from-hash/{{hash}} HTTP/1.1
Accept: application/json
Authorization: {{accessToken}}

### get Invoice requirements (lnurl-pay)
@k1 = 65d31dc0729a26c192db51562f0fdf4d51f9a20e0e541188639e53214081d945
GET {{baseurl}}/lnurl/pay/invoice-requirements?k1={{k1}} HTTP/1.1
Accept: application/json
# Authorization: {{accessToken}}

### Create LNURL-pay
POST {{baseurl}}/lnurl/pay HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{accessToken}}

{
    "accountId": "{{walletId}}"
}
